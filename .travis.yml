language: cpp
compiler:
  - clang

before_install:
  - sudo apt-get update -qq
  - sudo apt-get install -qq libpcre3 libpcre3-dev gromacs
  - sudo apt-get install -qq swig doxygen
  - sudo apt-get install -qq python-numpy python-scipy python-nose
  - sudo apt-get install valgrind

script:
  - mkdir build; cd build
  - cmake -DCMAKE_INSTALL_PREFIX=~/OpenMM -DCMAKE_BUILD_TYPE=Debug -DCMAKE_CXX_FLAGS_DEBUG="-g -fsanitize=address" .. 
  - make TestCpuSettle
  - ./TestCpuSettle
  - valgrind ./TestCpuSettle